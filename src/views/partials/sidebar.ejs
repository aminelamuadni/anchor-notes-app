<aside class="col-lg-3 p-0">
    <div class="offcanvas-lg offcanvas-start" tabindex="-1" id="sidebar" aria-labelledby="sidebarOffcanvasLabel">
        <div class="offcanvas-header border-bottom">
            <h5 class="offcanvas-title" id="sidebarOffcanvasLabel">Browse notes</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"
                data-bs-target="#sidebar"></button>
        </div>

        <div class="offcanvas-body p-0">
            <div class="d-flex flex-column align-items-stretch w-100">
                <div id="notes-list" class="list-group list-group-flush">
                    <% if (notes && notes.length> 0) { %>
                        <% notes.forEach(function(note) { %>
                            <div class="list-group-item list-group-item-action py-3 lh-sm"
                                data-note-id="<%= note._id %>" data-updated-at="<%= note.updatedAt %>">
                                <div class="d-flex gap-3">
                                    <div class="flex-grow-1 gap-3">
                                        <div class="d-flex justify-content-between gap-3">
                                            <a href="/notes/<%= note._id %>"
                                                class="note-link text-decoration-none stretched-link">
                                                <strong class="note-title">
                                                    <%= note.title || 'Untitled' %>
                                                </strong>
                                            </a>
                                            <small class="text-nowrap note-date" datetime="<%= note.updatedAt %>">
                                                <%= new Date(note.updatedAt).toLocaleString() %>
                                            </small>
                                        </div>
                                        <div class="note-preview small mt-1">
                                            <%= note.content ? (note.content.length> 50 ? note.content.substring(0, 50)
                                                + '...' : note.content) : '' %>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <button class="btn btn-sm btn-danger delete-note position-relative z-1"
                                            data-note-id="<%= note._id %>">
                                            <i class="fas fa-trash-alt fa-fw"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    <% } %>
                </div>
                <% if (typeof hasMore !=='undefined' && hasMore) { %>
                    <div class="p-3 border-top">
                        <button id="load-more-btn" class="btn btn-light w-100" data-default-text="Load More">
                            Load More
                        </button>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</aside>
